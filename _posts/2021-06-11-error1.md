---
layout: post
title: "[ì‚½ì§ˆê¸°ë¡] Error: unknown format: 65534"
date:   2021-06-11
image: '/assets/img/covers/error1.jpg'
tags: [ì‚½ì§ˆê¸°ë¡]
use_math: false
---
wav fileì„ splití•œ íŒŒì¼ì„ ë°›ì•„ google speech recognitionì„ ëŒë¦¬ëŠ” ì¤‘ì— ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤. ì´ íŒŒì¼ì€ `librosa`ë¡œëŠ” ì½í˜€ì§€ì§€ë§Œ `wave`ë¡œëŠ” ì½í˜€ì§€ì§€ ì•Šì•„ì„œ ì˜ì•„í–ˆë‹¤. speech_recognition moduleì—ì„œ ì—ëŸ¬ê°€ ë‚œê±°ì§€ë§Œ ê·¸ ì•ˆì˜ í•¨ìˆ˜ë“¤ë„ í•¨ê»˜ ì—ëŸ¬ê°€ ë‚œê±°ì—¬ì„œ ì›ì¸ì„ ì°¾ëŠ” ê²ƒì´ ìƒê°ë³´ë‹¤ ì–´ë ¤ì› ë‹¤..ì¼ì£¼ì¼ ê±¸ë ¸ë‹¤..ã… 

<!--more-->

# ì—ëŸ¬ í™”ë©´

```python
Error: unknown format: 65534
Error: file does not start with FORM id
ValueError: Audio file could not be read as PCM WAV, AIFF/AIFF-C, or Native FLAC; check if file is corrupted or in another format
```

ì›ì¸ì€ ìë¥¸ íŒŒì¼ì˜ í¬ë§· ë¬¸ì œì˜€ë‹¤. wav íŒŒì¼ ì•ˆì—ë„ pcm í¬ë§·ì„ í¬í•¨í•˜ê³  ìˆëŠ”ë° wav íŒŒì¼ì„ ì˜ë¼ë‚´ëŠ” ê³¼ì •ì—ì„œ í¬ë§·ì´ wav ì¸ì½”ë”© ì¤‘ í•˜ë‚˜ì¸ pcmìœ¼ë¡œ ë³€ê²½ëœ ê²ƒì´ë‹¤(ë‹¤ë§Œ, í™•ì¥ìëª…ì€ wav..ğŸ˜­). ê·¸ë˜ì„œ pcmì„ wav íŒŒì¼ë¡œ ë³€í™˜í•˜ë©´ ë¬¸ì œê°€ í•´ê²°ëœë‹¤!!



# 	ë³€í™˜ íŒŒì¼ì½”ë“œ

ì–´ë–¤ ììƒí•œ ë¶„ì´ ì½”ë“œë¥¼ ì§ì ‘ ì§œì£¼ì…”ì„œ ê·¸ëŒ€ë¡œ ê°€ì ¸ì™”ë‹¤. ì¶œì²˜ëŠ” ì•„ë˜ì—

```python
import wave

# The parameters are prerequisite information. More specifically,
# channels, bit_depth, sampling_rate must be known to use this function.
def pcm2wav( pcm_file, wav_file, channels=1, bit_depth=16, sampling_rate=16000 ):

    # Check if the options are valid.
    if bit_depth % 8 != 0:
        raise ValueError("bit_depth "+str(bit_depth)+" must be a multiple of 8.")
        
    # Read the .pcm file as a binary file and store the data to pcm_data
    with open( pcm_file, 'rb') as opened_pcm_file:
        pcm_data = opened_pcm_file.read();
        
        obj2write = wave.open( wav_file, 'wb')
        obj2write.setnchannels( channels )
        obj2write.setsampwidth( bit_depth // 8 )
        obj2write.setframerate( sampling_rate )
        obj2write.writeframes( pcm_data )
        obj2write.close()

pcm2wav( 'sample_001.pcm', 'sample_001.wav', 1, 16, 16000 )
```



# ì¶œì²˜

[pcm2wav.py](https://m.blog.naver.com/PostView.nhn?blogId=aimldl&logNo=221559323232&proxyReferer=https:%2F%2Fwww.google.com%2F)
