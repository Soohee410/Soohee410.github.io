I"F<p>wav fileì„ splití•œ íŒŒì¼ì„ ë°›ì•„ google speech recognitionì„ ëŒë¦¬ëŠ” ì¤‘ì— ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤. ì´ íŒŒì¼ì€ <code class="language-plaintext highlighter-rouge">librosa</code>ë¡œëŠ” ì½í˜€ì§€ì§€ë§Œ <code class="language-plaintext highlighter-rouge">wave</code>ë¡œëŠ” ì½í˜€ì§€ì§€ ì•Šì•„ì„œ ì˜ì•„í–ˆë‹¤. speech_recognition moduleì—ì„œ ì—ëŸ¬ê°€ ë‚œê±°ì§€ë§Œ ê·¸ ì•ˆì˜ í•¨ìˆ˜ë“¤ë„ í•¨ê»˜ ì—ëŸ¬ê°€ ë‚œê±°ì—¬ì„œ ì›ì¸ì„ ì°¾ëŠ” ê²ƒì´ ìƒê°ë³´ë‹¤ ì–´ë ¤ì› ë‹¤..ì¼ì£¼ì¼ ê±¸ë ¸ë‹¤..ã… </p>

<!--more-->

<h1 id="ì—ëŸ¬-í™”ë©´">ì—ëŸ¬ í™”ë©´</h1>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Error</span><span class="p">:</span> <span class="n">unknown</span> <span class="nb">format</span><span class="p">:</span> <span class="mi">65534</span>
<span class="n">Error</span><span class="p">:</span> <span class="nb">file</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">start</span> <span class="k">with</span> <span class="n">FORM</span> <span class="nb">id</span>
<span class="nb">ValueError</span><span class="p">:</span> <span class="n">Audio</span> <span class="nb">file</span> <span class="n">could</span> <span class="ow">not</span> <span class="n">be</span> <span class="n">read</span> <span class="k">as</span> <span class="n">PCM</span> <span class="n">WAV</span><span class="p">,</span> <span class="n">AIFF</span><span class="o">/</span><span class="n">AIFF</span><span class="o">-</span><span class="n">C</span><span class="p">,</span> <span class="ow">or</span> <span class="n">Native</span> <span class="n">FLAC</span><span class="p">;</span> <span class="n">check</span> <span class="k">if</span> <span class="nb">file</span> <span class="ow">is</span> <span class="n">corrupted</span> <span class="ow">or</span> <span class="ow">in</span> <span class="n">another</span> <span class="nb">format</span>
</code></pre></div></div>

<p>ì›ì¸ì€ ìë¥¸ íŒŒì¼ì˜ í¬ë§· ë¬¸ì œì˜€ë‹¤. wav íŒŒì¼ ì•ˆì—ë„ pcm í¬ë§·ì„ í¬í•¨í•˜ê³  ìˆëŠ”ë° wav íŒŒì¼ì„ ì˜ë¼ë‚´ëŠ” ê³¼ì •ì—ì„œ í¬ë§·ì´ wav ì¸ì½”ë”© ì¤‘ í•˜ë‚˜ì¸ pcmìœ¼ë¡œ ë³€ê²½ëœ ê²ƒì´ë‹¤(ë‹¤ë§Œ, í™•ì¥ìëª…ì€ wav..ğŸ˜­). ê·¸ë˜ì„œ pcmì„ wav íŒŒì¼ë¡œ ë³€í™˜í•˜ë©´ ë¬¸ì œê°€ í•´ê²°ëœë‹¤!!</p>

<h1 id="ë³€í™˜-íŒŒì¼ì½”ë“œ">ë³€í™˜ íŒŒì¼ì½”ë“œ</h1>

<p>ì–´ë–¤ ììƒí•œ ë¶„ì´ ì½”ë“œë¥¼ ì§ì ‘ ì§œì£¼ì…”ì„œ ê·¸ëŒ€ë¡œ ê°€ì ¸ì™”ë‹¤. ì¶œì²˜ëŠ” ì•„ë˜ì—</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">wave</span>

<span class="c1"># The parameters are prerequisite information. More specifically,
# channels, bit_depth, sampling_rate must be known to use this function.
</span><span class="k">def</span> <span class="nf">pcm2wav</span><span class="p">(</span> <span class="n">pcm_file</span><span class="p">,</span> <span class="n">wav_file</span><span class="p">,</span> <span class="n">channels</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">bit_depth</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span> <span class="n">sampling_rate</span><span class="o">=</span><span class="mi">16000</span> <span class="p">):</span>

    <span class="c1"># Check if the options are valid.
</span>    <span class="k">if</span> <span class="n">bit_depth</span> <span class="o">%</span> <span class="mi">8</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="nb">ValueError</span><span class="p">(</span><span class="s">"bit_depth "</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">bit_depth</span><span class="p">)</span><span class="o">+</span><span class="s">" must be a multiple of 8."</span><span class="p">)</span>
        
    <span class="c1"># Read the .pcm file as a binary file and store the data to pcm_data
</span>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span> <span class="n">pcm_file</span><span class="p">,</span> <span class="s">'rb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">opened_pcm_file</span><span class="p">:</span>
        <span class="n">pcm_data</span> <span class="o">=</span> <span class="n">opened_pcm_file</span><span class="p">.</span><span class="n">read</span><span class="p">();</span>
        
        <span class="n">obj2write</span> <span class="o">=</span> <span class="n">wave</span><span class="p">.</span><span class="nb">open</span><span class="p">(</span> <span class="n">wav_file</span><span class="p">,</span> <span class="s">'wb'</span><span class="p">)</span>
        <span class="n">obj2write</span><span class="p">.</span><span class="n">setnchannels</span><span class="p">(</span> <span class="n">channels</span> <span class="p">)</span>
        <span class="n">obj2write</span><span class="p">.</span><span class="n">setsampwidth</span><span class="p">(</span> <span class="n">bit_depth</span> <span class="o">//</span> <span class="mi">8</span> <span class="p">)</span>
        <span class="n">obj2write</span><span class="p">.</span><span class="n">setframerate</span><span class="p">(</span> <span class="n">sampling_rate</span> <span class="p">)</span>
        <span class="n">obj2write</span><span class="p">.</span><span class="n">writeframes</span><span class="p">(</span> <span class="n">pcm_data</span> <span class="p">)</span>
        <span class="n">obj2write</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>

<span class="n">pcm2wav</span><span class="p">(</span> <span class="s">'sample_001.pcm'</span><span class="p">,</span> <span class="s">'sample_001.wav'</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">16000</span> <span class="p">)</span>
</code></pre></div></div>

<h1 id="ì¶œì²˜">ì¶œì²˜</h1>

<p><a href="https://m.blog.naver.com/PostView.nhn?blogId=aimldl&amp;logNo=221559323232&amp;proxyReferer=https:%2F%2Fwww.google.com%2F">pcm2wav.py</a></p>
:ET